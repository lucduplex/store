{% extends "base.html" %}
{% load static %}

{% block title %}Profil{% endblock %}

{% block content %}
    <div class="container mt-5 mb-5" style="background: #121212; padding: 40px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5); color: #f1f1f1;">
        <div class="row">
            <!-- Sidebar pour les actions utilisateur -->
            <div class="col-md-4 mt-1">
                <div class="card text-center sidebar shadow-lg p-4" style="border-radius: 15px; background: #1e1e1e; color: #f1f1f1; border: none;">
                    <div class="card-body d-flex flex-column align-items-center">
                        {% if face_id %}
                            <img src="{{ face_id.url }}" class="rounded-circle shadow-lg" width="150" alt="Face ID" style="border: 4px solid #bb86fc;">
                        {% else %}
                            <img src="{% static 'default-avatar.png' %}" class="rounded-circle shadow-lg" width="150" alt="Default Avatar" style="border: 4px solid #bb86fc;">
                        {% endif %}

                        <div class="mt-4">
                            <h3 class="fw-bold">{{ request.user.username }}</h3>
                            <div class="d-grid gap-2 mt-4">
                                <a class="btn btn-outline-primary btn-sm shadow-sm text-light" href="{% url 'profile' %}">
                                    <i class="bi bi-person"></i> À propos
                                </a>
                                <a class="btn btn-outline-secondary btn-sm shadow-sm text-light" href="{% url 'updateAccount' %}">
                                    <i class="bi bi-pencil-square"></i> Modifier votre compte
                                </a>
                                <a class="btn btn-outline-secondary btn-sm shadow-sm text-light" href="{% url 'password_change' %}">
                                    <i class="bi bi-lock"></i> Modifier mot de passe
                                </a>
                                <a class="btn btn-outline-secondary btn-sm shadow-sm text-light" href="{% url 'confirm_deleteUser' %}">
                                    <i class="bi bi-trash"></i> Supprimer le compte
                                </a>
                                <a class="btn btn-outline-danger btn-sm shadow-sm mt-3" href="{% url 'logout' %}">
                                    <i class="bi bi-box-arrow-right"></i> Déconnexion
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section des détails du profil utilisateur -->
            <div class="col-md-8 mt-1">
                <div class="card content shadow-lg p-4" style="border-radius: 15px; background: #1e1e1e; color: #f1f1f1; border: none;">
                    <h2 class="mb-4 fw-bold text-primary">À propos</h2>
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <h5 class="fw-bold">Nom d'utilisateur:</h5>
                            </div>
                            <div class="col-md-8 text-secondary">
                                <h5 class="text-light">{{ request.user.username }}</h5>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <h5 class="fw-bold">Courriel:</h5>
                            </div>
                            <div class="col-md-8 text-secondary">
                                <h5 class="text-light">{{ email }}</h5>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <h5 class="fw-bold">Numéro de téléphone:</h5>
                            </div>
                            <div class="col-md-8 text-secondary">
                                <h5 class="text-light">{{ num_tel }}</h5>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <h5 class="fw-bold">Adresse:</h5>
                            </div>
                            <div class="col-md-8 text-secondary">
                                <h5 class="text-light">{{ address }}</h5>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <h5 class="fw-bold">Dernière connexion:</h5>
                            </div>
                            <div class="col-md-8 text-secondary">
                                <h5 class="text-light">{{ request.user.last_login|date:"d F Y à H:i" }}</h5>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <h5 class="fw-bold">Date d'adhésion:</h5>
                            </div>
                            <div class="col-md-8 text-secondary">
                                <h5 class="text-light">{{ request.user.date_joined|date:"d F Y à H:i" }}</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
